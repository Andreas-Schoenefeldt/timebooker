meta {
  name: Login
  type: http
  seq: 2
}

post {
  url: {{HOST}}/{{ACCOUNT}}/login
  body: json
  auth: none
}

body:json {
  {
    "account": "{{ACCOUNT}}",
    "email": "{{USER}}",
    "error_message": null,
    "password": "{{PASSWORD}}"
  }
}

tests {
  const result = res.getBody()?.data;
  
  test('has acccess_token', () => {
    expect(result).to.be.a('object');
    expect(result.access_token).to.be.a('string');
    
    bru.setEnvVar('ACCESS_TOKEN', result.access_token);
  })
}

settings {
  encodeUrl: true
  timeout: 0
}
